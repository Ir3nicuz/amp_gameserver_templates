{
    "AppID": "EnshroudedServer",
    "ApplicationName": "Enshrouded Server",
    
    "SteamAppID": "2278520",
    "Executable": "{{ExecutablePath}}",
    "Arguments": "{{LaunchArguments}}",

    "DynamicRunMode": "Docker"
    "DockerImage": "mcr.microsoft.com/windows/servercore:ltsc2022",
    "DockerRuntime": "windows",
    "DockerProvisioning": [
        "powershell -Command Invoke-WebRequest -Uri https://aka.ms/vs/17/release/vc_redist.x64.exe -OutFile vcredist.exe",
        "vcredist.exe /install /quiet /norestart",
        "del vcredist.exe"
    ],
    "DockerMounts": [
        {
            "HostPath": "{{$FullBaseDir}}",
            "ContainerPath": "C:\\app"
        }
    ],
    "DockerMappedFolders": [
        {
            "HostPath": "{{$FullInstancePath}}AppData",
            "ContainerPath": "C:\\Users\\ContainerUser\\AppData"
        },
        {
            "HostPath": "{{$FullInstancePath}}Documents",
            "ContainerPath": "C:\\Users\\ContainerUser\\Documents"
        }
    ],
    
    "UpdateStages": [
        {
            "UpdateStageName": "SteamCmd Server Update",
            "UpdateSource": "SteamCMD",
            "UpdateSourceData": "{{SteamAppID}}",
            "UpdateSourceArgs": "{{ServerFilesBetaVersion}}",
            "UpdateSourcePlatform": "Windows",
            "ForceDownloadPlatform": "Windows"
        }
    ],

    "Ports": [
        {
            "Name": "Game / Query Port",
            "Ref": "GamePort",
            "Protocol": "Both",
            "DefaultPort": 15637
        },
        {
            "Name": "Game / Query Port",
            "Ref": "GamePort2",
            "Protocol": "Both",
            "DefaultPort": 15636
        },
        {
            "Name": "Game / Query Port",
            "Ref": "GamePort3",
            "Protocol": "Both",
            "DefaultPort": 15638
        }
    ],

    "Settings": [
        {
            "FieldName": "ServerFilesBetaVersion",
            "DisplayName": "Beta Branch Version",
            "Description": "Server files beta branch version string, use public for latest released",
            "InputType": "text",
            "DefaultValue": "public"
        },
        {
            "FieldName": "ExecutablePath",
            "DisplayName": "Pfad zur Server .exe im Container",
            "Description": "Relativ zum Hauptverzeichnis, z.B. enshrouded_server.exe",
            "InputType": "text",
            "DefaultValue": "enshrouded_server.exe"
        },
        {
            "FieldName": "LaunchArguments",
            "DisplayName": "Startparameter",
            "Description": "Parameter f√ºr die Server .exe",
            "InputType": "text",
            "DefaultValue": ""
        }
    ]
}
